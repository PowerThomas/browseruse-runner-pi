services:
  browseruse-runner:
    build:
      context: ./browseruse-runner
    restart: unless-stopped
    shm_size: "1gb"
    environment:
      - RUNNER_API_KEY=${RUNNER_API_KEY}
      - BROWSER_USE_API_KEY=${BROWSER_USE_API_KEY}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - AZURE_OPENAI_API_KEY=${AZURE_OPENAI_API_KEY}
      - AZURE_OPENAI_ENDPOINT=${AZURE_OPENAI_ENDPOINT}
      - AZURE_OPENAI_DEPLOYMENT=${AZURE_OPENAI_DEPLOYMENT}
      - AZURE_OPENAI_API_VERSION=${AZURE_OPENAI_API_VERSION}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - GOOGLE_API_KEY=${GOOGLE_API_KEY}
      - MISTRAL_API_KEY=${MISTRAL_API_KEY}
      - GROQ_API_KEY=${GROQ_API_KEY}
      - DEEPSEEK_API_KEY=${DEEPSEEK_API_KEY}
      - CEREBRAS_API_KEY=${CEREBRAS_API_KEY}
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY}
      - VERCEL_API_KEY=${VERCEL_API_KEY}
      - OLLAMA_HOST=${OLLAMA_HOST}
      - PROFILES_DIR=/app/profiles
      - ARTIFACTS_DIR=/app/artifacts
    volumes:
      - browseruse_profiles:/app/profiles
      - browseruse_artifacts:/app/artifacts
    ports:
      - "127.0.0.1:5901:5900"
      - "127.0.0.1:7900:7900"
    expose:
      - "8000"

volumes:
  browseruse_profiles:
  browseruse_artifacts:
